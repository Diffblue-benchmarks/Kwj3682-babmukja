<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.babmukja.repository.mapper.RecipeMapper">

 	<resultMap id="recipeMap" type="recipe">
		<result column="mem_no" property="memNo" />
		<result column="mem_Nickname" property="memNickname" />
		<result column="recipe_no" property="recipeNo" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="viewcnt" property="viewCnt" />
		<result column="rating" property="rating" />
		<result column="imgpath" property="imgPath" />
	</resultMap> 
	<insert id="insertRecipe" parameterType="recipe">
		insert into tb_recipe(
					mem_no,title,content,imgpath)
					values(
					#{memNo},#{title},#{content},#{imgPath}
					)
	</insert>
	
	<select id="selectRecipe" resultMap="recipeMap">
		select m.mem_nickname,r.* from tb_member m,tb_recipe r
		 where m.mem_no = r.mem_no
		 order by regDate desc
	</select>
	
	<select id="selectRecipeByNo" parameterType="int" resultMap="recipeMap">
		select * from tb_recipe where recipe_no = #{recipeNo}
	</select>
	
	<update id="updateRecipe" parameterType="recipe">
		update tb_recipe
		   set title = #{title},
		       content = #{content}
		 where recipe_no = #{recipeNo}		   
	</update>
	
	<delete id="deleteRecipe" parameterType="int">
		delete 
		  from tb_recipe
		 where recipe_no = #{recipeNo}
	</delete>
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.babmukja.repository.mapper.StorePBMapper">
	<resultMap id="storepbMap" type="storePB">
		<result column="pb_no" property="pbNo" />
		<result column="name" property="name" />
		<result column="content" property="content" />
		<result column="price" property="price" />
		<result column="regdate" property="regDate" />
		<result column="mem_no" property="memNo" />
		<result column="viewcnt" property="viewCnt" />
		<result column="group_no" property="groupNo" />
	</resultMap>
	
	<resultMap id="fileMap" type="fileVO" >
		<result column="file_no" property="fileNo"/>
		<result column="group_no" property="groupNo"/>
		<result column="sysname" property="sysname"/>
		<result column="orgname" property="orgname"/>
		<result column="path" property="path"/>
		<result column="mem_no" property="memNo"/>
	</resultMap>
	
	<select id="selectPBList" resultMap="storepbMap">
		select *
		  from tb_pb
		 order by pb_no desc
	</select>
	
	<!--  게시물 등록  -->
	<insert id="insertpb" parameterType="storePB">
		insert into tb_pb
		(
			name, 
			content, 
			price, 
			mem_no, 
			group_no
		)
		values 
		( 
			#{name}, 
			#{content}, 
			#{price}, 
			3, 
			1 
		)
	</insert>
	
	<!-- 파일 업로드 -->
	<insert id="insertPBImage" parameterType="fileVO">
		insert into tb_file 
		(
			group_no, 
			sysname, 
			orgname, 
			path, 
			mem_no
		)
		values 
		(
			#{groupNo}, 
			#{sysname}, 
			#{orgname}, 
			#{path}, 
			3
		)
	</insert>
	
	<!--  파일 업로드  -->
	<select id="selectMaxNum" resultType="int">
		select max(pb_no) 
		  from tb_pb
	</select>
	
	<!--  -->
	
</mapper>